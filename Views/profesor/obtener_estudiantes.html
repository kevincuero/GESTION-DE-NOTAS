<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obtener Estudiantes</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profesor.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <div class="main-layout">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <i class="fas fa-chalkboard-teacher"></i>
      Profesor
    </div>
    <nav>
      <a href="{{ url_for('profesor_dashboard') }}" class="{% if 'dashboard' in request.path %}active{% endif %}"><i class="fas fa-home"></i> Dashboard</a>
      <a href="/profesor/obtener_estudiantes" class="{% if 'obtener_estudiantes' in request.path %}active{% endif %}"><i class="fas fa-users"></i> Obtener Estudiantes</a>
      <a href="/profesor/asignar_nota" class="{% if 'asignar_nota' in request.path %}active{% endif %}"><i class="fas fa-edit"></i> Asignar Nota</a>
      <a href="/profesor/cambiar_nota" class="{% if 'cambiar_nota' in request.path %}active{% endif %}"><i class="fas fa-sync-alt"></i> Cambiar Nota</a>
      <a href="/profesor/enviar_notificacion" class="{% if 'enviar_notificacion' in request.path %}active{% endif %}"><i class="fas fa-envelope"></i> Notificar</a>
      <a href="{{ url_for('indices') }}" class="{% if 'indices' in request.path %}active{% endif %}"><i class="fas fa-percent"></i> Índices</a>
      <a href="{{ url_for('profesor_hoja_vida') }}" class="{% if 'hoja_vida' in request.path %}active{% endif %}"><i class="fas fa-file-alt"></i> Hoja de vida</a>
    </nav>
    <a href="/logout" class="btn-logout">
      <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
    </a>
  </aside>

  <!-- Main Content -->
  <main class="content">
    <div class="dashboard-header">
      <h1 class="welcome-message">Bienvenido, {{ usuario['nombre'] }}</h1>
    </div>

    <div class="container">

      <h1>Obtener Estudiantes por Materia</h1>
                
                <form method="POST" action="{{ url_for('obtener_estudiantes') }}">
                    <div class="form-group">
                        <label for="id_materia">Selecciona una materia:</label>
                        <select name="id_materia" id="id_materia" required>
                            <option value="" disabled selected>-- Selecciona una materia --</option>
                            {% for materia in materias %}
                            <option value="{{ materia['id'] }}">{{ materia['nombre'] }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit">Buscar</button>
                </form>

                {% if estudiantes %}
                <h2>Estudiantes inscritos en la materia</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Nombre del Estudiante</th>
                            <th>Correo</th>
                            <th>Materia</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for estudiante in estudiantes %}
                        <tr>
                            <td>{{ estudiante['estudiante'] }}</td>
                            <td>{{ estudiante['correo'] }}</td>
                            <td>{{ estudiante['materia'] }}</td>
                            <td>
                                <a href="{{ url_for('revisar_estudiante', id_estudiante=estudiante['id']) }}" class="btn" style="width:auto; padding:0.4rem 0.8rem;">Revisar Estudiante</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% endif %}

                <a href="{{ url_for('profesor_dashboard') }}" style="text-decoration: none;">
                    <button type="button" class="btn-back">Volver al Dashboard</button>
                </a>
            </div>
        </main>
    </div>
</body>
</html>