{% extends 'profesor/base.html' %}

{% block title %}Obtener Estudiantes - Profesor{% endblock %}

{% block main_content %}
  <div class="dashboard-header">
    <h1 class="welcome-message">Bienvenido, {{ usuario['nombre'] }}</h1>
  </div>

    <div class="container">

      <h1>Obtener Estudiantes por Materia</h1>
                
                <form method="POST" action="{{ url_for('obtener_estudiantes') }}">
                    <div class="form-group">
                        <label for="id_materia">Selecciona una materia:</label>
                        <select name="id_materia" id="id_materia" required>
                            <option value="" disabled selected>-- Selecciona una materia --</option>
                            {% for materia in materias %}
                            <option value="{{ materia['id'] }}">{{ materia['nombre'] }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit">Buscar</button>
                </form>

                {% if estudiantes %}
                <h2>Estudiantes inscritos en la materia</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Nombre del Estudiante</th>
                            <th>Correo</th>
                            <th>Materia</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for estudiante in estudiantes %}
                        <tr>
                            <td>{{ estudiante['estudiante'] }}</td>
                            <td>{{ estudiante['correo'] }}</td>
                            <td>{{ estudiante['materia'] }}</td>
                            <td>
                                <a href="{{ url_for('revisar_estudiante', id_estudiante=estudiante['id']) }}" class="btn" style="width:auto; padding:0.4rem 0.8rem;">Revisar Estudiante</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% endif %}

                <a href="{{ url_for('profesor_dashboard') }}" style="text-decoration: none;">
                  <button type="button" class="btn-back">Volver al Dashboard</button>
                </a>
              </div>
        {% endblock %}