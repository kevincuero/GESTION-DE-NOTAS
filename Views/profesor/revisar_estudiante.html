{% extends 'profesor/base.html' %}

{% block title %}Revisar Estudiante - Profesor{% endblock %}

{% block main_content %}
  

  <!-- Main Content -->
  <main class="content">
    <div class="dashboard-header">
      <h1 class="welcome-message">Informe del Estudiante</h1>
    </div>

    <div class="container">
      {% if estudiante %}
        <div class="student-info">
          <h2>{{ estudiante['nombre'] }}</h2>
          <p><strong>Correo:</strong> {{ estudiante['correo'] }}</p>
        </div>
      {% else %}
        <p>Estudiante no encontrado.</p>
      {% endif %}

      <h3>Materias inscritas y calificaciones</h3>
      {% if informe %}
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>Materia</th>
                <th>Profesor</th>
                <th>Tipo de Nota</th>
                <th>Nota</th>
                <th>Comentario</th>
                <th>Fecha</th>
              </tr>
            </thead>
            <tbody>
            {% for m in informe %}
              {% if m.notas and m.notas|length > 0 %}
                {% for nota in m.notas %}
                <tr>
                  <td>{{ m.materia }}</td>
                  <td>{{ m.profesor or 'Sin profesor asignado' }}</td>
                  <td>{{ nota.tipo }}</td>
                  <td>{{ nota.nota }}</td>
                  <td>{{ nota.comentario }}</td>
                  <td>{{ nota.fecha }}</td>
                </tr>
                {% endfor %}
              {% else %}
                <tr>
                  <td>{{ m.materia }}</td>
                  <td>{{ m.profesor or 'Sin profesor asignado' }}</td>
                  <td colspan="4">No hay calificaciones registradas</td>
                </tr>
              {% endif %}
            {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <p>El estudiante no est√° inscrito en ninguna materia o no tiene registros.</p>
      {% endif %}

      <a href="{{ url_for('obtener_estudiantes') }}"><button class="btn-back">Volver</button></a>
    </div>
  </main>
{% endblock %}